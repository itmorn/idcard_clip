# idcard_cut
## 背景
对身份证图像进行数字化的过程包含两个步骤：
- 身份证裁剪（本项目要解决的问题）
- 身份证OCR

## 身份证裁剪功能
参考：[百度身份证识别接口](https://ai.baidu.com/ai-doc/OCR/rk3h7xzck)
- 身份证检测与切片：返回身份证的base64编码及位置信息（去掉证件外围多余背景、自动矫正拍摄角度）
- 头像检测与切片：返回头像切片的base64编码及位置信息

## 算法原理
- 使用Faster RCNN目标检测算法对压缩图像检测“姓名”和“公民身份号码”的位置
- 根据这两个框体的位置，获取原图对应的切片
- 使用SIFT提取切片特征和模板特征。PS：模板是提前准备好的两张图片，分别是“姓名”和“公民身份号码”
- 使用KNN进行相似关键点匹配，根据原图部分区域和模板的对应关系，计算出身份证的四个角的位置
- 使用透视剪裁对切片进行矫正
- 使用Face Mesh头像检测，获取头像
- 返回矫正裁剪后的身份证切片和头像


# idcard_clip
整张大图中寻找人脸比较容易，但是直接寻找边缘比较难，同时人脸检测模型也可以粗略的过滤掉质量不好的图像
可以通过人脸检测 对图像进行一下裁剪和调整方向，为有利于后续的图像标注
但是当图像方向不正的时候，人脸检测会漏检，所以优先使用具有旋转不变性质的算法做粗略的定位

模板匹配裁剪+旋转（可选）
人脸检测裁剪+旋转（可选）
DNN计算证件四个顶点坐标
透视变换 

eiseg